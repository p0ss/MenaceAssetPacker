# Unnamed Functions Analysis & Renaming Plan

This document analyzes the remaining unnamed functions in GameAssembly.dll and provides a systematic plan for addressing them.

## Executive Summary

| Metric | Count | Percentage |
|--------|-------|------------|
| Total Functions | ~158,787 | 100% |
| Named (Il2CppDumper) | ~126,887 | 80% |
| Named (IL2CPP Runtime) | ~65 | <1% |
| Unnamed (FUN_*) | ~31,018 | 20% |

The 80% coverage from Il2CppDumper is excellent. The remaining 20% are primarily:
- IL2CPP runtime internals (already partially addressed)
- Compiler-generated code (thunks, wrappers)
- Native library code (crypto, threading)
- Low-value helper functions

## Binary Structure

### Segment Layout

| Segment | Start | End | Size | Content |
|---------|-------|-----|------|---------|
| `.text` | 0x180001000 | 0x1804e99ff | ~5MB | IL2CPP runtime, native libs |
| `il2cpp` | 0x1804ea000 | 0x182d8e7ff | ~40MB | Compiled game code |

### Unnamed Function Distribution

| Segment | Unnamed Count | Notes |
|---------|---------------|-------|
| `.text` | ~28,326 | IL2CPP runtime, crypto, threading |
| `il2cpp` | ~2,692 | Compiler-generated wrappers |

## Category Analysis

### Category 1: IL2CPP Runtime Core (COMPLETE)
**Status:** âœ… Done - 65+ functions renamed
**Location:** 0x180420000 - 0x1804e9000

Already renamed in `il2cpp-runtime.md`:
- GC/Memory (13 functions)
- Object System (13 functions)
- String Operations (6 functions)
- Exception Handling (18 functions)
- Method Dispatch (9+ functions)

### Category 2: Compiler-Generated Thunks
**Status:** ðŸ”´ Low Priority
**Location:** Scattered throughout both segments
**Estimated Count:** ~5,000-8,000

These are small wrapper functions generated by IL2CPP:
- Virtual method dispatch thunks
- Interface method resolution
- Generic method instantiation stubs
- Delegate invocation wrappers

**Example Pattern:**
```c
void thunk_FUN_1804607c0(param_1, param_2) {
    return FUN_1804607c0(param_1, param_2);
}
```

**Recommendation:** LOW PRIORITY - These don't add semantic value when renamed. The underlying function they call is already named.

### Category 3: TLS & Initialization
**Status:** ðŸŸ¡ Medium Priority
**Location:** 0x180001000 - 0x180010000
**Estimated Count:** ~50-100

Functions handling:
- Thread-local storage allocation (`TlsAlloc`, `TlsGetValue`)
- Static constructor execution
- Module initialization (`atexit` registration)

**Example (0x180001060):**
```c
void il2cpp_tls_init(void) {
    DAT_183b94510 = TlsAlloc();
    DAT_183b94518 = TlsAlloc();
    atexit(il2cpp_tls_cleanup);
}
```

**Identification Strategy:**
- Look for `TlsAlloc`/`TlsFree` calls
- Look for `atexit` registration
- Look for one-time initialization flags

### Category 4: Native Crypto (BoringSSL/mono_btls)
**Status:** ðŸŸ¡ Medium Priority
**Location:** 0x180200000 - 0x180300000 (estimated)
**Estimated Count:** ~500-1000

The game uses BoringSSL (Google's OpenSSL fork) via mono_btls for:
- TLS/SSL connections
- Certificate handling
- Cryptographic primitives

**Already Named:** Mono.Btls.* wrapper functions are named by Il2CppDumper

**Unnamed:** Low-level BoringSSL implementation functions

**Identification Strategy:**
- Look for crypto constants (AES S-boxes, SHA constants)
- Cross-reference with BoringSSL source
- Functions called by named `mono_btls_*` functions

**Recommendation:** MEDIUM PRIORITY - Useful for security analysis but complex to rename accurately.

### Category 5: Marshalling & Interop
**Status:** ðŸŸ¡ Medium Priority
**Location:** Scattered in `.text`
**Estimated Count:** ~200-500

Functions for:
- P/Invoke marshalling (managed â†” native)
- COM interop
- Delegate reverse marshalling

**Identification Strategy:**
- Look for string error messages about marshalling
- Functions called by `System.Runtime.InteropServices.Marshal.*`
- Functions with mixed managed/native calling conventions

### Category 6: Collection/Generic Helpers
**Status:** ðŸŸ¢ High Priority
**Location:** 0x18004d000 - 0x180060000
**Estimated Count:** ~500-1000

Generic collection method instantiations:
- `List<T>.Insert`, `List<T>.Add`, etc.
- `Dictionary<K,V>` operations
- `Array.Copy` specialized variants

**Example (0x18004fed0):** `List<T>.Insert` for 0x48-byte elements

**Identification Strategy:**
- Look for `ThrowArgumentOutOfRangeException` calls
- Look for array bounds checking patterns
- Element sizes in struct copies (0x48, 0x20, etc.)

**Recommendation:** HIGH PRIORITY - These appear frequently in game code.

### Category 7: Error Handling Stubs
**Status:** ðŸŸ¢ High Priority
**Location:** 0x180428000 - 0x180430000
**Estimated Count:** ~50-100

Functions like:
- `FUN_180428db0` - Raises NullReferenceException
- `FUN_180428da0` - Raises IndexOutOfRangeException
- `FUN_180428d70` - Generic exception raiser

**Identification Strategy:**
- Look for `swi(3)` (software interrupt / trap)
- Look for calls to exception creation functions
- Short functions that don't return

### Category 8: Unity/Third-Party Native Code
**Status:** ðŸ”´ Low Priority
**Location:** Various
**Estimated Count:** ~5000+

Native implementations for:
- Unity engine internals
- Steam API (already named)
- Physics engine
- Audio system

**Recommendation:** LOW PRIORITY - These are third-party libraries, not game-specific code.

## Prioritized Renaming Plan

### Phase 1: High-Impact Runtime (COMPLETE)
âœ… GC/Memory functions
âœ… Object creation/boxing
âœ… String operations
âœ… Exception handling
âœ… Method dispatch

### Phase 2: Error Handling Stubs
**Target:** ~50-100 functions
**Impact:** Makes error paths readable

1. Find all functions containing `swi(3)`
2. Trace back to determine exception type
3. Rename as `il2cpp_raise_*` or `il2cpp_throw_*`

### Phase 3: Collection Helpers
**Target:** ~100 high-frequency functions
**Impact:** Makes data structure operations readable

1. Identify functions with bounds checking
2. Match to collection method patterns
3. Rename as `List_T_Insert_0x48` etc. (size-specific)

### Phase 4: TLS & Initialization
**Target:** ~50 functions
**Impact:** Makes startup/threading code readable

1. Find TLS allocation patterns
2. Trace initialization chains
3. Rename as `il2cpp_tls_*`, `il2cpp_init_*`

### Phase 5: Crypto (Optional)
**Target:** ~100-200 key functions
**Impact:** Security analysis only

1. Identify BoringSSL function signatures
2. Cross-reference with public BoringSSL symbols
3. Focus on entry points, not internal helpers

## Functions to Skip

The following categories provide minimal value when renamed:

1. **Thunks** - Simple wrappers that just forward calls
2. **Inlined Functions** - Duplicated code from compiler optimization
3. **Unity Internals** - Engine code not relevant to modding
4. **Generic Instantiations** - Thousands of variants for each generic type

## Recommended Next Steps

1. **Immediate:** Complete Phase 2 (Error Handling Stubs) - ~2 hours
2. **Short-term:** Complete Phase 3 (Collection Helpers) - ~4 hours
3. **Optional:** Phases 4-5 as needed for specific analysis

## Verification

After each phase:
1. Decompile a game function that uses the renamed functions
2. Verify improved readability
3. Document any unexpected patterns discovered

## Notes

- The 80% coverage from Il2CppDumper is already excellent
- Focus renaming effort on functions that appear in game code analysis
- Compiler-generated code (thunks, wrappers) provides minimal value when renamed
- Some unnamed functions are intentionally internal and don't need names
